<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>MAGI System</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <header>
      <h1>MAGI Parallel Debate</h1>
      <p class="status" id="status">待機中</p>
    </header>

    <form id="control-form">
      <label>
        議題
        <textarea
          id="topic-input"
          rows="3"
          placeholder="例: AIは人間の仕事を奪うか？"
          required
        ></textarea>
      </label>

      <label>
        モード
        <select id="mode-select">
          <option value="general">汎用モード</option>
          <option value="development">システム開発モード</option>
        </select>
      </label>

      <label class="rounds-row">
        ラウンド数
        <input id="rounds-input" type="number" min="1" max="10" value="3" />
      </label>

      <div class="button-row">
        <button type="submit" id="start-btn">議論を開始</button>
        <button type="button" id="stop-btn" class="secondary" disabled>停止</button>
      </div>
    </form>

    <section class="advanced-settings">
      <div class="section-header">
        <h2>タイムアウト設定</h2>
        <span id="settings-status" class="settings-status">未同期</span>
      </div>
      <p class="settings-description">
        応答取得やタブ再アクティブのタイミングを変更できます（chrome.storage.syncで共有されます）。
      </p>
      <div class="settings-grid">
        <label>
          応答待ちタイムアウト（秒）
          <input
            id="response-timeout-input"
            type="number"
            min="60"
            max="900"
            step="30"
            value="300"
          />
        </label>
        <label>
          タブ再アクティブ化間隔（秒）
          <input
            id="tab-refocus-input"
            type="number"
            min="10"
            max="300"
            step="5"
            value="45"
          />
        </label>
      </div>
      <button type="button" id="settings-save-btn" class="secondary">設定を保存</button>
    </section>

    <section>
      <div class="section-header">
        <h2>ログ</h2>
        <div class="section-actions">
          <button id="download-log-btn" type="button" class="secondary">ログを保存</button>
          <button id="clear-log-btn" type="button" class="secondary">ログをクリア</button>
        </div>
      </div>
      <pre id="log-view"></pre>
    </section>

    <section>
      <h2>ラウンド結果</h2>
      <div id="rounds-view" class="rounds-view">ラウンド結果はまだありません。</div>
    </section>

    <section>
      <h2>最終まとめ</h2>
      <div id="summary-view">議論完了後に表示されます。</div>
    </section>

    <script type="module" src="popup.js"></script>
  </body>
</html>

